<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rhythm Game</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            overflow: hidden;
            background-color: #1a1a2e;
        }
        .key {
            transition: all 0.07s ease;
            border-bottom-width: 8px;
        }
        .key.pressed {
            transform: scale(0.95);
            border-bottom-width: 4px;
            filter: brightness(1.2);
        }
        #game-container {
            touch-action: manipulation;
        }
        .feedback {
            animation: fadeOutUp 0.5s forwards;
        }
        @keyframes fadeOutUp {
            from {
                opacity: 1;
                transform: translateY(0);
            }
            to {
                opacity: 0;
                transform: translateY(-50px);
            }
        }
    </style>
</head>
<body class="bg-gray-900 text-white flex items-center justify-center min-h-screen">

    <div id="game-container" class="w-full max-w-md mx-auto text-center">
        <div id="start-screen" class="p-8">
            <h1 class="text-5xl font-bold mb-4 text-cyan-400">Rhythm Master</h1>
            <p class="text-lg mb-8 text-gray-300">Tap to the beat of the music!</p>
            <div class="mb-6">
                <label for="song-select" class="block mb-2 text-sm font-medium text-gray-400">Select a Song:</label>
                <select id="song-select" class="bg-gray-800 border border-gray-700 text-white text-sm rounded-lg focus:ring-cyan-500 focus:border-cyan-500 block w-full p-2.5">
                    <!-- Song options will be populated by JS -->
                </select>
            </div>
            <button id="start-button" class="w-full bg-cyan-500 hover:bg-cyan-600 text-white font-bold py-3 px-6 rounded-lg text-xl transition duration-300 transform hover:scale-105">
                Start Game
            </button>
             <div class="mt-8 text-sm text-gray-500">
                <p>Use keys: D, F, J, K</p>
            </div>
        </div>

        <div id="game-screen" class="hidden relative">
            <div id="ui-overlay" class="absolute top-0 left-0 w-full p-4 z-20 flex justify-between items-start">
                <div>
                    <p class="text-lg font-semibold">Score: <span id="score">0</span></p>
                </div>
                <div class="text-right">
                    <p class="text-3xl font-bold text-cyan-400">Combo: <span id="combo">0</span></p>
                </div>
            </div>

            <canvas id="gameCanvas" class="bg-gray-800 rounded-lg shadow-2xl"></canvas>
            
            <div id="feedback-container" class="absolute inset-0 flex items-center justify-center pointer-events-none z-30">
                 {/* Feedback text like 'Perfect', 'Miss' will appear here */}
            </div>

            <div id="key-press-indicators" class="w-full mt-2 grid grid-cols-4 gap-2">
                <div id="key-d" class="key bg-pink-500 border-pink-700 rounded-lg p-4 h-24 flex items-center justify-center text-2xl font-bold">D</div>
                <div id="key-f" class="key bg-purple-500 border-purple-700 rounded-lg p-4 h-24 flex items-center justify-center text-2xl font-bold">F</div>
                <div id="key-j" class="key bg-blue-500 border-blue-700 rounded-lg p-4 h-24 flex items-center justify-center text-2xl font-bold">J</div>
                <div id="key-k" class="key bg-green-500 border-green-700 rounded-lg p-4 h-24 flex items-center justify-center text-2xl font-bold">K</div>
            </div>
        </div>
        
        <div id="end-screen" class="hidden p-8">
            <h2 class="text-4xl font-bold mb-2">Game Over</h2>
            <p class="text-2xl mb-4">Final Score: <span id="final-score" class="text-cyan-400 font-bold">0</span></p>
            <p class="text-xl mb-2">Max Combo: <span id="max-combo" class="text-cyan-400 font-bold">0</span></p>
            
            <!-- Leaderboard UI -->
            <div id="leaderboard-container" class="mt-6 text-left">
                <h3 class="text-2xl font-bold text-cyan-400 mb-2">Leaderboard</h3>
                <ol id="leaderboard-list" class="list-decimal list-inside bg-gray-800 p-4 rounded-lg">
                    <!-- Scores will be populated here -->
                </ol>
            </div>

            <!-- New High Score Form -->
            <div id="new-high-score" class="hidden mt-4">
                <p class="text-lg text-green-400 font-bold">New High Score!</p>
                <input type="text" id="initials-input" maxlength="4" placeholder="Enter Your Initials" class="bg-gray-800 border border-gray-700 text-white text-center rounded-lg p-2 mt-2 w-full">
                <button id="submit-score-button" class="w-full mt-2 bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded-lg">Submit</button>
            </div>

            <button id="restart-button" class="w-full mt-6 bg-cyan-500 hover:bg-cyan-600 text-white font-bold py-3 px-6 rounded-lg text-xl transition duration-300 transform hover:scale-105">
                Play Again
            </button>
        </div>

    </div>

    <audio id="game-audio" preload="auto"></audio>

    <script type="module">
        // --- Firebase Imports ---
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
        import { getFirestore, collection, getDocs, addDoc, query, orderBy, limit, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

        // --- Firebase Config (REPLACE WITH YOURS) ---
        const firebaseConfig = {
          apiKey: "AIzaSyDNbuHP2mx-y5FYCAA3Ys76r50ei6NlpZc",
          authDomain: "rhythm-game-leaderboard.firebaseapp.com",
          projectId: "rhythm-game-leaderboard",
          storageBucket: "rhythm-game-leaderboard.appspot.com",
          messagingSenderId: "993264784281",
          appId: "1:993264784281:web:c98e9c9bc2d5d13fe97908"
        };

        // --- Initialize Firebase ---
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // --- DOM Elements ---
        const startScreen = document.getElementById('start-screen');
        const gameScreen = document.getElementById('game-screen');
        const endScreen = document.getElementById('end-screen');
        const startButton = document.getElementById('start-button');
        const restartButton = document.getElementById('restart-button');
        const songSelect = document.getElementById('song-select');
        const leaderboardList = document.getElementById('leaderboard-list');
        const newHighScoreContainer = document.getElementById('new-high-score');
        const initialsInput = document.getElementById('initials-input');
        const submitScoreButton = document.getElementById('submit-score-button');

        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');

        const scoreDisplay = document.getElementById('score');
        const comboDisplay = document.getElementById('combo');
        const finalScoreDisplay = document.getElementById('final-score');
        const maxComboDisplay = document.getElementById('max-combo');
        const feedbackContainer = document.getElementById('feedback-container');
        
        const gameAudio = document.getElementById('game-audio');

        // --- Game Configuration ---
        const lanes = 4;
        const tileHeight = 50;
        const tileSpeed = 500; // Pixels per second
        
        const keyMap = { 'd': 0, 'f': 1, 'j': 2, 'k': 3 };
        const keyElements = {
            'd': document.getElementById('key-d'),
            'f': document.getElementById('key-f'),
            'j': document.getElementById('key-j'),
            'k': document.getElementById('key-k'),
        };
        const laneColors = ['#ff3d8b', '#a33dff', '#3d91ff', '#3dff8b'];

        // --- Hit Windows (in seconds) ---
        const hitWindows = {
            perfect: 0.05,
            great: 0.1,
            good: 0.15,
            miss: 0.2
        };

        const scores = {
            perfect: 100,
            great: 75,
            good: 50,
            miss: 0
        };

        // --- Game State ---
        let score = 0;
        let combo = 0;
        let maxCombo = 0;
        let tiles = [];
        let upcomingTiles = [];
        let currentSong;
        let audioStartTime = 0;
        let isPlaying = false;
        let animationFrameId;

        // --- Song Data ---
        const songs = [
            {
                id: "raise-the-banner",
                title: "Raise the Banner",
                artist: "?",
                url: "https://raw.githubusercontent.com/CoryBouchard/html5-rhythm-game/main/RaisetheBanner.mp3",
                bpm: 85,
                beatmap: [{"time":0,"lane":0},{"time":1.643,"lane":1},{"time":1.664,"lane":2},{"time":2.304,"lane":3},{"time":2.517,"lane":0},{"time":3.605,"lane":1},{"time":4.032,"lane":2},{"time":4.693,"lane":3},{"time":5.333,"lane":0},{"time":5.568,"lane":1},{"time":5.781,"lane":2},{"time":5.995,"lane":3},{"time":7.957,"lane":0},{"time":8.832,"lane":1},{"time":9.259,"lane":2},{"time":9.28,"lane":3},{"time":10.133,"lane":0},{"time":11.221,"lane":1},{"time":12.053,"lane":2},{"time":12.224,"lane":3},{"time":12.331,"lane":0},{"time":12.523,"lane":1},{"time":13.611,"lane":2},{"time":13.824,"lane":3},{"time":14.464,"lane":0},{"time":14.699,"lane":1},{"time":14.72,"lane":2},{"time":18.816,"lane":3},{"time":22.08,"lane":0},{"time":22.741,"lane":1},{"time":22.955,"lane":2},{"time":23.403,"lane":3},{"time":24.491,"lane":0},{"time":25.131,"lane":1},{"time":26.005,"lane":2},{"time":28.395,"lane":3},{"time":33.173,"lane":0},{"time":33.387,"lane":1},{"time":33.6,"lane":2},{"time":36.437,"lane":3},{"time":47.765,"lane":0},{"time":50.347,"lane":1},{"time":50.56,"lane":2},{"time":55.36,"lane":3},{"time":58.837,"lane":0},{"time":61.461,"lane":1},{"time":63.381,"lane":2},{"time":63.808,"lane":3},{"time":64.021,"lane":0},{"time":64.256,"lane":1},{"time":65.131,"lane":2},{"time":72.981,"lane":3},{"time":74.688,"lane":0},{"time":74.731,"lane":1},{"time":76.651,"lane":2},{"time":76.864,"lane":3},{"time":77.739,"lane":0},{"time":77.952,"lane":1},{"time":78.165,"lane":2},{"time":78.4,"lane":3},{"time":79.275,"lane":0},{"time":79.701,"lane":1},{"time":81.877,"lane":2},{"time":82.325,"lane":3},{"time":83.179,"lane":0},{"time":83.627,"lane":1},{"time":85.355,"lane":2},{"time":86.229,"lane":3},{"time":86.656,"lane":0},{"time":87.531,"lane":1},{"time":91.008,"lane":2},{"time":92.757,"lane":3},{"time":93.184,"lane":0},{"time":93.611,"lane":1},{"time":94.507,"lane":2},{"time":96.661,"lane":3},{"time":99.925,"lane":0},{"time":101.419,"lane":1},{"time":101.973,"lane":2},{"time":102.293,"lane":3},{"time":102.507,"lane":0},{"time":102.528,"lane":1},{"time":103.189,"lane":2},{"time":104.043,"lane":3},{"time":104.469,"lane":0},{"time":107.541,"lane":1},{"time":110.144,"lane":2},{"time":111.445,"lane":3},{"time":111.872,"lane":0},{"time":112.32,"lane":1},{"time":114.283,"lane":2},{"time":115.563,"lane":3},{"time":115.776,"lane":0},{"time":115.989,"lane":1},{"time":116.203,"lane":2},{"time":116.437,"lane":3},{"time":119.019,"lane":0},{"time":119.04,"lane":1},{"time":122.517,"lane":2},{"time":122.731,"lane":3},{"time":122.944,"lane":0},{"time":123.157,"lane":1},{"time":123.456,"lane":2},{"time":123.605,"lane":3},{"time":124.032,"lane":0},{"time":124.053,"lane":1},{"time":124.48,"lane":2},{"time":124.907,"lane":3},{"time":124.928,"lane":0},{"time":125.333,"lane":1},{"time":125.355,"lane":2},{"time":125.781,"lane":3},{"time":126.229,"lane":0},{"time":126.656,"lane":1},{"time":127.531,"lane":2},{"time":130.347,"lane":3},{"time":130.581,"lane":0},{"time":131.883,"lane":1},{"time":132.309,"lane":2},{"time":132.736,"lane":3},{"time":133.184,"lane":0},{"time":134.037,"lane":1},{"time":135.787,"lane":2},{"time":136.235,"lane":3},{"time":136.661,"lane":0},{"time":137.515,"lane":1},{"time":137.963,"lane":2},{"time":139.264,"lane":3},{"time":143.168,"lane":0},{"time":143.275,"lane":1},{"time":143.381,"lane":2},{"time":143.701,"lane":3},{"time":144.021,"lane":0},{"time":144.256,"lane":1},{"time":144.491,"lane":2},{"time":144.917,"lane":3},{"time":145.344,"lane":0},{"time":146.219,"lane":1},{"time":147.52,"lane":2},{"time":147.968,"lane":3},{"time":148.416,"lane":0},{"time":148.843,"lane":1},{"time":149.269,"lane":2},{"time":150.571,"lane":3},{"time":151.445,"lane":0},{"time":152.747,"lane":1},{"time":153.173,"lane":2},{"time":157.077,"lane":3},{"time":157.717,"lane":0},{"time":157.739,"lane":1},{"time":157.952,"lane":2},{"time":158.165,"lane":3},{"time":158.187,"lane":0}]
            },
            {
                title: "Play the Game",
                id: "play-the-game",
                artist: "?",
                url: "https://raw.githubusercontent.com/CoryBouchard/html5-rhythm-game/main/PlaytheGame.mp3",
                bpm: 150, // You might need to adjust this
                beatmap: [{"time":0,"lane":0},{"time":0.256,"lane":1},{"time":0.277,"lane":2},{"time":0.299,"lane":3},{"time":0.32,"lane":0},{"time":6.571,"lane":1},{"time":6.976,"lane":2},{"time":7.36,"lane":3},{"time":7.723,"lane":0},{"time":7.765,"lane":1},{"time":8.192,"lane":2},{"time":8.939,"lane":3},{"time":9.301,"lane":0},{"time":9.344,"lane":1},{"time":9.728,"lane":2},{"time":9.749,"lane":3},{"time":10.133,"lane":0},{"time":10.475,"lane":1},{"time":10.517,"lane":2},{"time":10.901,"lane":3},{"time":11.307,"lane":0},{"time":11.328,"lane":1},{"time":12.075,"lane":2},{"time":12.096,"lane":3},{"time":12.459,"lane":0},{"time":12.48,"lane":1},{"time":12.821,"lane":2},{"time":12.864,"lane":3},{"time":12.885,"lane":0},{"time":13.291,"lane":1},{"time":13.675,"lane":2},{"time":14.059,"lane":3},{"time":14.08,"lane":0},{"time":14.101,"lane":1},{"time":15.232,"lane":2},{"time":15.253,"lane":3},{"time":15.637,"lane":0},{"time":15.659,"lane":1},{"time":16.021,"lane":2},{"time":16.043,"lane":3},{"time":16.064,"lane":0},{"time":17.216,"lane":1},{"time":17.259,"lane":2},{"time":18.027,"lane":3},{"time":18.411,"lane":0},{"time":18.752,"lane":1},{"time":18.816,"lane":2},{"time":19.2,"lane":3},{"time":19.221,"lane":0},{"time":19.989,"lane":1},{"time":20.395,"lane":2},{"time":20.416,"lane":3},{"time":21.184,"lane":0},{"time":21.568,"lane":1},{"time":21.973,"lane":2},{"time":22.229,"lane":3},{"time":22.763,"lane":0},{"time":23.083,"lane":1},{"time":23.125,"lane":2},{"time":23.147,"lane":3},{"time":23.723,"lane":0},{"time":23.765,"lane":1},{"time":23.787,"lane":2},{"time":23.957,"lane":3},{"time":24.341,"lane":0},{"time":24.725,"lane":1},{"time":25.131,"lane":2},{"time":25.152,"lane":3},{"time":25.515,"lane":0},{"time":25.536,"lane":1},{"time":25.643,"lane":2},{"time":25.92,"lane":3},{"time":26.304,"lane":0},{"time":27.499,"lane":1},{"time":27.883,"lane":2},{"time":28.245,"lane":3},{"time":28.288,"lane":0},{"time":28.544,"lane":1},{"time":29.077,"lane":2},{"time":29.461,"lane":3},{"time":29.867,"lane":0},{"time":30.123,"lane":1},{"time":30.272,"lane":2},{"time":30.976,"lane":3},{"time":31.04,"lane":0},{"time":31.445,"lane":1},{"time":31.616,"lane":2},{"time":31.659,"lane":3},{"time":31.829,"lane":0},{"time":31.851,"lane":1},{"time":32.619,"lane":2},{"time":33.024,"lane":3},{"time":33.237,"lane":0},{"time":33.813,"lane":1},{"time":34.795,"lane":2},{"time":34.816,"lane":3},{"time":34.859,"lane":0},{"time":35.008,"lane":1},{"time":35.392,"lane":2},{"time":36.203,"lane":3},{"time":36.416,"lane":0},{"time":36.437,"lane":1},{"time":36.971,"lane":2},{"time":37.952,"lane":3},{"time":37.973,"lane":0},{"time":38.144,"lane":1},{"time":38.165,"lane":2},{"time":39.552,"lane":3},{"time":39.573,"lane":0},{"time":40.128,"lane":1},{"time":40.747,"lane":2},{"time":41.173,"lane":3},{"time":41.707,"lane":0},{"time":42.432,"lane":1},{"time":42.752,"lane":2},{"time":43.285,"lane":3},{"time":44.053,"lane":0},{"time":44.075,"lane":1},{"time":44.459,"lane":2},{"time":44.48,"lane":3},{"time":44.864,"lane":0},{"time":44.885,"lane":1},{"time":45.568,"lane":2},{"time":45.653,"lane":3},{"time":46.059,"lane":0},{"time":46.827,"lane":1},{"time":47.211,"lane":2},{"time":47.232,"lane":3},{"time":47.253,"lane":0},{"time":47.616,"lane":1},{"time":47.637,"lane":2},{"time":48.021,"lane":3},{"time":48.384,"lane":0},{"time":48.427,"lane":1},{"time":48.768,"lane":2},{"time":48.811,"lane":3},{"time":49.984,"lane":0},{"time":50.368,"lane":1},{"time":50.411,"lane":2},{"time":50.795,"lane":3},{"time":51.179,"lane":0},{"time":51.349,"lane":1},{"time":51.371,"lane":2},{"time":51.435,"lane":3},{"time":51.499,"lane":0},{"time":52.288,"lane":1},{"time":52.352,"lane":2},{"time":52.373,"lane":3},{"time":53.141,"lane":0},{"time":53.547,"lane":1},{"time":53.568,"lane":2},{"time":55.104,"lane":3},{"time":55.125,"lane":0},{"time":55.509,"lane":1},{"time":55.531,"lane":2},{"time":55.915,"lane":3},{"time":56.299,"lane":0},{"time":56.704,"lane":1},{"time":57.109,"lane":2},{"time":58.091,"lane":3},{"time":58.475,"lane":0},{"time":58.496,"lane":1},{"time":58.645,"lane":2},{"time":59.072,"lane":3},{"time":59.883,"lane":0},{"time":60.117,"lane":1},{"time":60.267,"lane":2},{"time":60.651,"lane":3},{"time":61.653,"lane":0},{"time":61.675,"lane":1},{"time":61.845,"lane":2},{"time":62.229,"lane":3},{"time":62.976,"lane":0},{"time":63.019,"lane":1},{"time":63.04,"lane":2},{"time":63.403,"lane":3},{"time":63.424,"lane":0},{"time":64.597,"lane":1},{"time":64.619,"lane":2},{"time":64.725,"lane":3},{"time":64.832,"lane":0},{"time":66.432,"lane":1},{"time":67.093,"lane":2},{"time":67.136,"lane":3},{"time":67.755,"lane":0},{"time":68.139,"lane":1},{"time":68.16,"lane":2},{"time":68.8,"lane":3},{"time":68.843,"lane":0},{"time":68.928,"lane":1},{"time":68.949,"lane":2},{"time":69.333,"lane":3},{"time":69.504,"lane":0},{"time":69.525,"lane":1},{"time":69.547,"lane":2},{"time":69.739,"lane":3},{"time":70.912,"lane":0},{"time":71.125,"lane":1},{"time":72.704,"lane":2},{"time":72.896,"lane":3},{"time":74.091,"lane":0},{"time":74.325,"lane":1},{"time":75.861,"lane":2},{"time":76.053,"lane":3},{"time":77.461,"lane":0},{"time":78.635,"lane":1},{"time":79.061,"lane":2},{"time":79.211,"lane":3},{"time":80.213,"lane":0},{"time":80.341,"lane":1},{"time":80.64,"lane":2},{"time":82.219,"lane":3},{"time":82.24,"lane":0},{"time":82.368,"lane":1},{"time":83.797,"lane":2},{"time":83.819,"lane":3},{"time":85.376,"lane":0},{"time":85.525,"lane":1},{"time":86.037,"lane":2},{"time":86.699,"lane":3},{"time":86.72,"lane":0},{"time":88.533,"lane":1},{"time":88.683,"lane":2},{"time":88.811,"lane":3},{"time":88.875,"lane":0},{"time":90.112,"lane":1},{"time":90.261,"lane":2},{"time":91.456,"lane":3},{"time":91.691,"lane":0},{"time":91.712,"lane":1},{"time":92.373,"lane":2},{"time":92.416,"lane":3},{"time":94.592,"lane":0},{"time":94.997,"lane":1},{"time":95.616,"lane":2},{"time":95.979,"lane":3},{"time":96,"lane":0},{"time":96.363,"lane":1},{"time":96.384,"lane":2},{"time":96.405,"lane":3},{"time":97.365,"lane":0},{"time":97.664,"lane":1},{"time":97.685,"lane":2},{"time":97.771,"lane":3},{"time":98.517,"lane":0},{"time":98.539,"lane":1},{"time":98.56,"lane":2},{"time":98.944,"lane":3},{"time":99.541,"lane":0},{"time":99.563,"lane":1},{"time":100.523,"lane":2},{"time":100.864,"lane":3},{"time":100.885,"lane":0},{"time":100.928,"lane":1},{"time":100.949,"lane":2},{"time":101.312,"lane":3},{"time":101.717,"lane":0},{"time":101.931,"lane":1},{"time":102.485,"lane":2},{"time":102.507,"lane":3},{"time":102.592,"lane":0},{"time":102.613,"lane":1},{"time":102.72,"lane":2},{"time":103.637,"lane":3},{"time":103.659,"lane":0},{"time":103.68,"lane":1},{"time":104.427,"lane":2},{"time":104.469,"lane":3},{"time":105.088,"lane":0},{"time":105.259,"lane":1},{"time":105.643,"lane":2},{"time":106.048,"lane":3},{"time":106.069,"lane":0},{"time":106.837,"lane":1},{"time":107.221,"lane":2},{"time":107.243,"lane":3},{"time":107.413,"lane":0},{"time":107.456,"lane":1},{"time":107.627,"lane":2},{"time":108.779,"lane":3},{"time":108.821,"lane":0},{"time":109.013,"lane":1},{"time":109.035,"lane":2},{"time":109.611,"lane":3},{"time":110.592,"lane":0},{"time":110.635,"lane":1},{"time":110.656,"lane":2},{"time":110.784,"lane":3},{"time":111.189,"lane":0},{"time":112.213,"lane":1},{"time":113.749,"lane":2},{"time":113.941,"lane":3},{"time":114.112,"lane":0},{"time":115.349,"lane":1},{"time":115.925,"lane":2},{"time":116.544,"lane":3},{"time":116.949,"lane":0},{"time":116.971,"lane":1},{"time":117.099,"lane":2},{"time":118.549,"lane":3},{"time":120.128,"lane":0},{"time":120.256,"lane":1},{"time":120.277,"lane":2},{"time":121.685,"lane":3},{"time":121.707,"lane":0},{"time":123.264,"lane":1},{"time":123.285,"lane":2},{"time":123.819,"lane":3},{"time":124.587,"lane":0},{"time":124.608,"lane":1},{"time":124.992,"lane":2},{"time":126.443,"lane":3},{"time":126.571,"lane":0},{"time":128.021,"lane":1},{"time":128.149,"lane":2},{"time":129.344,"lane":3},{"time":129.579,"lane":0},{"time":129.6,"lane":1},{"time":129.728,"lane":2},{"time":130.965,"lane":3},{"time":134.464,"lane":0},{"time":134.869,"lane":1},{"time":135.253,"lane":2},{"time":135.659,"lane":3},{"time":136.043,"lane":0},{"time":136.064,"lane":1},{"time":136.832,"lane":2},{"time":136.853,"lane":3},{"time":137.216,"lane":0},{"time":137.237,"lane":1},{"time":137.621,"lane":2},{"time":137.643,"lane":3},{"time":138.027,"lane":0},{"time":138.411,"lane":1},{"time":138.432,"lane":2},{"time":138.816,"lane":3}]
            },
                        {
                title: "Sweden VS America",
                id: "sweden-vs-america",
                artist: "?",
                url: "https://raw.githubusercontent.com/CoryBouchard/html5-rhythm-game/main/SwedenvsAmerica.mp3",
                bpm: 150, // You might need to adjust this
                beatmap: [{"time":0,"lane":0},{"time":0.043,"lane":1},{"time":0.256,"lane":2},{"time":0.469,"lane":3},{"time":0.661,"lane":0},{"time":0.683,"lane":1},{"time":0.875,"lane":2},{"time":1.088,"lane":3},{"time":1.301,"lane":0},{"time":1.515,"lane":1},{"time":1.941,"lane":2},{"time":2.133,"lane":3},{"time":2.155,"lane":0},{"time":2.347,"lane":1},{"time":2.368,"lane":2},{"time":2.56,"lane":3},{"time":2.581,"lane":0},{"time":2.773,"lane":1},{"time":2.987,"lane":2},{"time":3.2,"lane":3},{"time":3.413,"lane":0},{"time":3.627,"lane":1},{"time":3.84,"lane":2},{"time":4.053,"lane":3},{"time":4.267,"lane":0},{"time":4.48,"lane":1},{"time":4.672,"lane":2},{"time":4.693,"lane":3},{"time":4.885,"lane":0},{"time":5.312,"lane":1},{"time":5.525,"lane":2},{"time":5.739,"lane":3},{"time":5.952,"lane":0},{"time":6.165,"lane":1},{"time":6.379,"lane":2},{"time":6.592,"lane":3},{"time":6.827,"lane":0},{"time":6.997,"lane":1},{"time":7.019,"lane":2},{"time":7.232,"lane":3},{"time":7.659,"lane":0},{"time":8.064,"lane":1},{"time":8.085,"lane":2},{"time":8.277,"lane":3},{"time":8.491,"lane":0},{"time":8.512,"lane":1},{"time":8.704,"lane":2},{"time":8.939,"lane":3},{"time":9.109,"lane":0},{"time":9.131,"lane":1},{"time":9.323,"lane":2},{"time":9.536,"lane":3},{"time":9.963,"lane":0},{"time":9.984,"lane":1},{"time":10.197,"lane":2},{"time":10.389,"lane":3},{"time":10.411,"lane":0},{"time":10.624,"lane":1},{"time":10.816,"lane":2},{"time":11.029,"lane":3},{"time":11.243,"lane":0},{"time":11.477,"lane":1},{"time":11.627,"lane":2},{"time":11.883,"lane":3},{"time":12.075,"lane":0},{"time":12.309,"lane":1},{"time":12.501,"lane":2},{"time":12.715,"lane":3},{"time":12.736,"lane":0},{"time":12.928,"lane":1},{"time":13.141,"lane":2},{"time":13.163,"lane":3},{"time":13.568,"lane":0},{"time":14.187,"lane":1},{"time":14.421,"lane":2},{"time":14.848,"lane":3},{"time":15.019,"lane":0},{"time":15.253,"lane":1},{"time":15.445,"lane":2},{"time":15.467,"lane":3},{"time":15.701,"lane":0},{"time":15.872,"lane":1},{"time":16.299,"lane":2},{"time":16.512,"lane":3},{"time":16.533,"lane":0},{"time":16.725,"lane":1},{"time":16.96,"lane":2},{"time":17.152,"lane":3},{"time":17.387,"lane":0},{"time":17.792,"lane":1},{"time":17.813,"lane":2},{"time":18.645,"lane":3},{"time":18.837,"lane":0},{"time":19.051,"lane":1},{"time":19.072,"lane":2},{"time":19.264,"lane":3},{"time":19.477,"lane":0},{"time":19.499,"lane":1},{"time":19.648,"lane":2},{"time":20.117,"lane":3},{"time":20.352,"lane":0},{"time":20.736,"lane":1},{"time":20.757,"lane":2},{"time":20.949,"lane":3},{"time":21.163,"lane":0},{"time":21.184,"lane":1},{"time":21.376,"lane":2},{"time":21.611,"lane":3},{"time":21.803,"lane":0},{"time":22.016,"lane":1},{"time":22.037,"lane":2},{"time":22.208,"lane":3},{"time":22.443,"lane":0},{"time":22.464,"lane":1},{"time":22.635,"lane":2},{"time":22.848,"lane":3},{"time":22.869,"lane":0},{"time":23.061,"lane":1},{"time":23.275,"lane":2},{"time":23.296,"lane":3},{"time":23.488,"lane":0},{"time":23.701,"lane":1},{"time":23.723,"lane":2},{"time":23.915,"lane":3},{"time":24.149,"lane":0},{"time":24.555,"lane":1},{"time":24.576,"lane":2},{"time":24.747,"lane":3},{"time":25.173,"lane":0},{"time":25.408,"lane":1},{"time":25.6,"lane":2},{"time":25.813,"lane":3},{"time":25.835,"lane":0},{"time":26.027,"lane":1},{"time":26.24,"lane":2},{"time":26.261,"lane":3},{"time":26.432,"lane":0},{"time":26.453,"lane":1},{"time":26.667,"lane":2},{"time":26.859,"lane":3},{"time":27.093,"lane":0},{"time":27.285,"lane":1},{"time":27.499,"lane":2},{"time":27.52,"lane":3},{"time":27.925,"lane":0},{"time":27.947,"lane":1},{"time":28.139,"lane":2},{"time":28.373,"lane":3},{"time":28.565,"lane":0},{"time":28.8,"lane":1},{"time":28.971,"lane":2},{"time":29.184,"lane":3},{"time":29.397,"lane":0},{"time":29.632,"lane":1},{"time":29.824,"lane":2},{"time":30.059,"lane":3},{"time":30.251,"lane":0},{"time":30.464,"lane":1},{"time":30.485,"lane":2},{"time":30.677,"lane":3},{"time":30.891,"lane":0},{"time":30.912,"lane":1},{"time":31.317,"lane":2},{"time":31.509,"lane":3},{"time":31.723,"lane":0},{"time":31.936,"lane":1},{"time":32.171,"lane":2},{"time":32.363,"lane":3},{"time":32.576,"lane":0},{"time":32.768,"lane":1},{"time":32.789,"lane":2},{"time":33.003,"lane":3},{"time":33.408,"lane":0},{"time":33.621,"lane":1},{"time":33.835,"lane":2},{"time":33.856,"lane":3},{"time":34.475,"lane":0},{"time":34.688,"lane":1},{"time":34.709,"lane":2},{"time":34.901,"lane":3},{"time":35.115,"lane":0},{"time":35.563,"lane":1},{"time":35.733,"lane":2},{"time":35.947,"lane":3},{"time":35.968,"lane":0},{"time":36.16,"lane":1},{"time":36.395,"lane":2},{"time":36.587,"lane":3},{"time":36.8,"lane":0},{"time":36.821,"lane":1},{"time":37.013,"lane":2},{"time":37.248,"lane":3},{"time":37.845,"lane":0},{"time":38.08,"lane":1},{"time":38.272,"lane":2},{"time":38.507,"lane":3},{"time":38.699,"lane":0},{"time":38.933,"lane":1},{"time":39.125,"lane":2},{"time":39.339,"lane":3},{"time":39.36,"lane":0},{"time":39.531,"lane":1},{"time":39.552,"lane":2},{"time":39.765,"lane":3},{"time":39.957,"lane":0},{"time":40.192,"lane":1},{"time":40.384,"lane":2},{"time":40.619,"lane":3},{"time":40.811,"lane":0},{"time":41.045,"lane":1},{"time":41.237,"lane":2},{"time":41.28,"lane":3},{"time":41.451,"lane":0},{"time":42.069,"lane":1},{"time":42.091,"lane":2},{"time":42.304,"lane":3},{"time":42.731,"lane":0},{"time":42.923,"lane":1},{"time":43.157,"lane":2},{"time":43.349,"lane":3},{"time":43.776,"lane":0},{"time":44.011,"lane":1},{"time":44.416,"lane":2},{"time":44.608,"lane":3},{"time":44.843,"lane":0},{"time":45.461,"lane":1},{"time":45.696,"lane":2},{"time":45.888,"lane":3},{"time":46.123,"lane":0},{"time":46.293,"lane":1},{"time":46.528,"lane":2},{"time":46.72,"lane":3},{"time":46.933,"lane":0},{"time":47.147,"lane":1},{"time":47.381,"lane":2},{"time":47.573,"lane":3},{"time":47.808,"lane":0},{"time":48.192,"lane":1},{"time":48.213,"lane":2},{"time":48.427,"lane":3},{"time":48.64,"lane":0},{"time":49.067,"lane":1},{"time":49.493,"lane":2},{"time":49.685,"lane":3},{"time":49.92,"lane":0},{"time":50.112,"lane":1},{"time":50.325,"lane":2},{"time":50.347,"lane":3},{"time":50.517,"lane":0},{"time":50.539,"lane":1},{"time":50.901,"lane":2},{"time":51.2,"lane":3},{"time":51.371,"lane":0},{"time":51.605,"lane":1},{"time":51.797,"lane":2},{"time":52.032,"lane":3},{"time":52.437,"lane":0},{"time":52.459,"lane":1},{"time":52.651,"lane":2},{"time":53.291,"lane":3},{"time":53.44,"lane":0},{"time":53.483,"lane":1},{"time":53.696,"lane":2},{"time":53.717,"lane":3},{"time":53.888,"lane":0},{"time":53.909,"lane":1},{"time":54.144,"lane":2},{"time":54.549,"lane":3},{"time":54.741,"lane":0},{"time":55.168,"lane":1},{"time":55.403,"lane":2},{"time":55.595,"lane":3},{"time":55.829,"lane":0},{"time":56.021,"lane":1},{"time":56.256,"lane":2},{"time":56.405,"lane":3},{"time":56.448,"lane":0},{"time":56.683,"lane":1},{"time":56.832,"lane":2},{"time":56.853,"lane":3},{"time":56.875,"lane":0},{"time":57.088,"lane":1},{"time":57.28,"lane":2},{"time":57.301,"lane":3},{"time":57.515,"lane":0},{"time":57.941,"lane":1},{"time":58.133,"lane":2},{"time":58.368,"lane":3},{"time":58.539,"lane":0},{"time":58.56,"lane":1},{"time":58.795,"lane":2},{"time":58.965,"lane":3},{"time":58.987,"lane":0},{"time":59.221,"lane":1},{"time":59.392,"lane":2},{"time":59.819,"lane":3},{"time":60.181,"lane":0},{"time":60.416,"lane":1},{"time":60.437,"lane":2},{"time":60.651,"lane":3},{"time":60.885,"lane":0},{"time":60.907,"lane":1},{"time":61.312,"lane":2},{"time":61.333,"lane":3},{"time":61.504,"lane":0},{"time":61.739,"lane":1},{"time":61.931,"lane":2},{"time":62.144,"lane":3},{"time":62.187,"lane":0},{"time":62.357,"lane":1},{"time":62.592,"lane":2},{"time":62.784,"lane":3},{"time":62.997,"lane":0},{"time":63.019,"lane":1},{"time":63.211,"lane":2},{"time":63.403,"lane":3},{"time":63.445,"lane":0},{"time":63.616,"lane":1},{"time":64.043,"lane":2},{"time":64.064,"lane":3},{"time":64.256,"lane":0},{"time":64.277,"lane":1},{"time":64.469,"lane":2},{"time":64.875,"lane":3},{"time":65.109,"lane":0},{"time":65.323,"lane":1},{"time":65.749,"lane":2},{"time":65.963,"lane":3},{"time":65.984,"lane":0},{"time":66.155,"lane":1},{"time":66.368,"lane":2},{"time":66.389,"lane":3},{"time":66.581,"lane":0},{"time":66.816,"lane":1},{"time":67.008,"lane":2},{"time":67.243,"lane":3},{"time":67.435,"lane":0},{"time":67.84,"lane":1},{"time":67.861,"lane":2},{"time":68.501,"lane":3},{"time":68.672,"lane":0},{"time":68.693,"lane":1},{"time":68.928,"lane":2},{"time":69.12,"lane":3},{"time":69.547,"lane":0},{"time":69.76,"lane":1},{"time":69.781,"lane":2},{"time":69.952,"lane":3},{"time":69.973,"lane":0},{"time":70.187,"lane":1},{"time":70.208,"lane":2},{"time":70.379,"lane":3},{"time":70.613,"lane":0},{"time":70.805,"lane":1},{"time":71.04,"lane":2},{"time":71.467,"lane":3},{"time":71.659,"lane":0},{"time":72.064,"lane":1},{"time":72.085,"lane":2},{"time":72.32,"lane":3},{"time":72.469,"lane":0},{"time":72.725,"lane":1},{"time":72.917,"lane":2},{"time":73.131,"lane":3},{"time":73.344,"lane":0},{"time":73.771,"lane":1},{"time":73.984,"lane":2},{"time":74.176,"lane":3},{"time":74.197,"lane":0},{"time":74.411,"lane":1},{"time":74.624,"lane":2},{"time":74.816,"lane":3},{"time":75.243,"lane":0},{"time":75.456,"lane":1},{"time":75.669,"lane":2},{"time":75.883,"lane":3},{"time":76.096,"lane":0},{"time":76.267,"lane":1},{"time":76.309,"lane":2},{"time":76.715,"lane":3},{"time":76.736,"lane":0},{"time":76.928,"lane":1},{"time":77.355,"lane":2},{"time":77.568,"lane":3},{"time":77.717,"lane":0},{"time":77.781,"lane":1},{"time":78.208,"lane":2},{"time":78.421,"lane":3},{"time":79.061,"lane":0},{"time":80.107,"lane":1},{"time":80.32,"lane":2},{"time":80.747,"lane":3},{"time":80.939,"lane":0},{"time":81.152,"lane":1},{"time":81.173,"lane":2},{"time":81.365,"lane":3},{"time":81.579,"lane":0},{"time":81.792,"lane":1},{"time":82.005,"lane":2},{"time":82.219,"lane":3},{"time":82.645,"lane":0},{"time":83.285,"lane":1},{"time":83.477,"lane":2},{"time":83.691,"lane":3},{"time":83.904,"lane":0},{"time":84.117,"lane":1},{"time":84.331,"lane":2},{"time":84.544,"lane":3},{"time":84.757,"lane":0},{"time":84.971,"lane":1},{"time":85.184,"lane":2},{"time":85.803,"lane":3},{"time":86.251,"lane":0},{"time":86.443,"lane":1},{"time":86.549,"lane":2},{"time":86.656,"lane":3},{"time":86.763,"lane":0},{"time":86.869,"lane":1},{"time":86.976,"lane":2},{"time":87.296,"lane":3},{"time":87.403,"lane":0},{"time":87.509,"lane":1},{"time":87.595,"lane":2},{"time":87.808,"lane":3},{"time":87.915,"lane":0},{"time":87.936,"lane":1},{"time":88.128,"lane":2},{"time":88.341,"lane":3},{"time":88.555,"lane":0},{"time":88.768,"lane":1},{"time":88.981,"lane":2},{"time":89.195,"lane":3},{"time":89.216,"lane":0},{"time":89.408,"lane":1},{"time":89.621,"lane":2},{"time":89.643,"lane":3},{"time":89.813,"lane":0},{"time":89.835,"lane":1},{"time":90.027,"lane":2},{"time":90.24,"lane":3},{"time":90.453,"lane":0},{"time":90.475,"lane":1},{"time":90.667,"lane":2},{"time":90.88,"lane":3},{"time":91.093,"lane":0},{"time":91.307,"lane":1},{"time":91.328,"lane":2},{"time":91.52,"lane":3},{"time":91.755,"lane":0},{"time":92.352,"lane":1},{"time":92.587,"lane":2},{"time":92.779,"lane":3},{"time":93.013,"lane":0},{"time":93.205,"lane":1},{"time":93.419,"lane":2},{"time":93.44,"lane":3},{"time":93.632,"lane":0},{"time":93.845,"lane":1},{"time":94.037,"lane":2},{"time":94.464,"lane":3},{"time":94.677,"lane":0},{"time":94.891,"lane":1},{"time":95.125,"lane":2},{"time":95.317,"lane":3},{"time":95.552,"lane":0},{"time":95.744,"lane":1},{"time":95.979,"lane":2},{"time":96.149,"lane":3},{"time":96.171,"lane":0},{"time":96.384,"lane":1},{"time":96.576,"lane":2},{"time":96.597,"lane":3},{"time":97.003,"lane":0},{"time":97.429,"lane":1},{"time":97.856,"lane":2},{"time":98.261,"lane":3},{"time":98.283,"lane":0},{"time":98.688,"lane":1},{"time":98.923,"lane":2},{"time":99.115,"lane":3},{"time":99.349,"lane":0},{"time":99.541,"lane":1},{"time":99.776,"lane":2},{"time":99.968,"lane":3},{"time":100.181,"lane":0},{"time":100.373,"lane":1},{"time":100.587,"lane":2},{"time":100.8,"lane":3},{"time":101.013,"lane":0},{"time":101.227,"lane":1},{"time":101.44,"lane":2},{"time":101.461,"lane":3},{"time":101.653,"lane":0},{"time":101.717,"lane":1},{"time":101.888,"lane":2},{"time":102.08,"lane":3},{"time":102.293,"lane":0},{"time":102.315,"lane":1},{"time":102.507,"lane":2},{"time":102.72,"lane":3},{"time":102.741,"lane":0},{"time":102.912,"lane":1},{"time":102.933,"lane":2},{"time":103.125,"lane":3},{"time":103.147,"lane":0},{"time":103.339,"lane":1},{"time":103.573,"lane":2},{"time":103.765,"lane":3},{"time":104,"lane":0},{"time":104.192,"lane":1},{"time":104.405,"lane":2},{"time":104.427,"lane":3},{"time":104.619,"lane":0},{"time":104.832,"lane":1},{"time":105.259,"lane":2},{"time":105.685,"lane":3},{"time":105.877,"lane":0},{"time":106.112,"lane":1},{"time":106.304,"lane":2},{"time":106.539,"lane":3},{"time":106.731,"lane":0},{"time":106.965,"lane":1},{"time":107.136,"lane":2},{"time":107.371,"lane":3},{"time":107.392,"lane":0},{"time":107.584,"lane":1},{"time":107.797,"lane":2},{"time":107.989,"lane":3},{"time":108.203,"lane":0},{"time":108.416,"lane":1},{"time":108.629,"lane":2},{"time":108.651,"lane":3},{"time":108.843,"lane":0},{"time":109.077,"lane":1},{"time":109.483,"lane":2},{"time":109.504,"lane":3},{"time":109.909,"lane":0},{"time":109.931,"lane":1},{"time":110.101,"lane":2},{"time":110.336,"lane":3},{"time":110.528,"lane":0},{"time":110.741,"lane":1},{"time":110.763,"lane":2},{"time":110.955,"lane":3},{"time":111.189,"lane":0},{"time":111.36,"lane":1},{"time":111.381,"lane":2},{"time":111.616,"lane":3},{"time":111.787,"lane":0},{"time":112.021,"lane":1},{"time":112.213,"lane":2},{"time":112.448,"lane":3},{"time":112.619,"lane":0},{"time":112.64,"lane":1},{"time":112.853,"lane":2},{"time":112.875,"lane":3},{"time":113.067,"lane":0},{"time":113.28,"lane":1},{"time":113.301,"lane":2},{"time":113.472,"lane":3},{"time":113.493,"lane":0},{"time":113.685,"lane":1},{"time":113.792,"lane":2},{"time":113.899,"lane":3},{"time":114.005,"lane":0},{"time":114.112,"lane":1},{"time":114.325,"lane":2},{"time":114.432,"lane":3},{"time":114.539,"lane":0},{"time":114.645,"lane":1},{"time":114.752,"lane":2},{"time":114.859,"lane":3},{"time":114.965,"lane":0},{"time":114.987,"lane":1},{"time":115.179,"lane":2},{"time":115.392,"lane":3},{"time":115.413,"lane":0},{"time":115.584,"lane":1},{"time":115.605,"lane":2},{"time":115.819,"lane":3},{"time":116.011,"lane":0},{"time":116.245,"lane":1},{"time":116.437,"lane":2},{"time":116.672,"lane":3},{"time":116.864,"lane":0},{"time":117.077,"lane":1},{"time":117.099,"lane":2},{"time":117.291,"lane":3},{"time":117.504,"lane":0},{"time":117.696,"lane":1},{"time":117.717,"lane":2},{"time":117.931,"lane":3},{"time":118.123,"lane":0},{"time":118.357,"lane":1},{"time":118.549,"lane":2},{"time":118.784,"lane":3},{"time":118.976,"lane":0},{"time":119.189,"lane":1},{"time":119.211,"lane":2},{"time":119.403,"lane":3},{"time":119.616,"lane":0},{"time":119.829,"lane":1},{"time":120.235,"lane":2},{"time":120.469,"lane":3},{"time":120.661,"lane":0},{"time":120.896,"lane":1},{"time":121.088,"lane":2},{"time":121.301,"lane":3},{"time":121.515,"lane":0},{"time":121.728,"lane":1},{"time":121.941,"lane":2},{"time":122.773,"lane":3},{"time":122.987,"lane":0},{"time":123.2,"lane":1},{"time":123.627,"lane":2},{"time":123.84,"lane":3},{"time":123.947,"lane":0},{"time":124.053,"lane":1},{"time":124.459,"lane":2},{"time":124.885,"lane":3},{"time":125.099,"lane":0},{"time":125.312,"lane":1},{"time":125.525,"lane":2},{"time":125.632,"lane":3},{"time":125.739,"lane":0},{"time":125.845,"lane":1},{"time":125.952,"lane":2},{"time":126.165,"lane":3},{"time":126.891,"lane":0},{"time":126.997,"lane":1},{"time":127.104,"lane":2},{"time":127.211,"lane":3},{"time":127.317,"lane":0},{"time":127.424,"lane":1},{"time":127.531,"lane":2},{"time":127.851,"lane":3},{"time":127.957,"lane":0},{"time":128.064,"lane":1},{"time":128.171,"lane":2},{"time":128.277,"lane":3},{"time":128.384,"lane":0},{"time":128.491,"lane":1}]
            },
                                    {
                title: "Kickflip Kingdom",
                id: "kickflip-kingdom",
                artist: "?",
                url: "https://raw.githubusercontent.com/CoryBouchard/html5-rhythm-game/main/KickflipKingdom.mp3",
                bpm: 150, // You might need to adjust this
                beatmap: [{"time":0,"lane":0},{"time":0.085,"lane":1},{"time":0.107,"lane":2},{"time":0.235,"lane":3},{"time":0.256,"lane":0},{"time":0.576,"lane":1},{"time":0.875,"lane":2},{"time":0.896,"lane":3},{"time":1.365,"lane":0},{"time":1.621,"lane":1},{"time":1.685,"lane":2},{"time":2.005,"lane":3},{"time":2.475,"lane":0},{"time":3.392,"lane":1},{"time":3.413,"lane":2},{"time":3.904,"lane":3},{"time":4.181,"lane":0},{"time":4.523,"lane":1},{"time":5.013,"lane":2},{"time":5.312,"lane":3},{"time":5.333,"lane":0},{"time":5.803,"lane":1},{"time":6.123,"lane":2},{"time":6.272,"lane":3},{"time":6.421,"lane":0},{"time":6.443,"lane":1},{"time":6.592,"lane":2},{"time":6.891,"lane":3},{"time":6.912,"lane":0},{"time":7.061,"lane":1},{"time":7.381,"lane":2},{"time":7.531,"lane":3},{"time":7.829,"lane":0},{"time":7.851,"lane":1},{"time":8.171,"lane":2},{"time":8.32,"lane":3},{"time":8.341,"lane":0},{"time":8.789,"lane":1},{"time":9.131,"lane":2},{"time":9.429,"lane":3},{"time":9.579,"lane":0},{"time":9.6,"lane":1},{"time":9.92,"lane":2},{"time":10.048,"lane":3},{"time":10.069,"lane":0},{"time":10.219,"lane":1},{"time":10.389,"lane":2},{"time":10.688,"lane":3},{"time":10.859,"lane":0},{"time":11.157,"lane":1},{"time":11.179,"lane":2},{"time":11.328,"lane":3},{"time":11.456,"lane":0},{"time":11.477,"lane":1},{"time":11.499,"lane":2},{"time":11.648,"lane":3},{"time":11.947,"lane":0},{"time":12.117,"lane":1},{"time":12.587,"lane":2},{"time":12.907,"lane":3},{"time":13.205,"lane":0},{"time":13.376,"lane":1},{"time":13.397,"lane":2},{"time":13.696,"lane":3},{"time":13.845,"lane":0},{"time":13.995,"lane":1},{"time":14.016,"lane":2},{"time":14.037,"lane":3},{"time":14.485,"lane":0},{"time":14.635,"lane":1},{"time":14.805,"lane":2},{"time":15.104,"lane":3},{"time":15.125,"lane":0},{"time":15.275,"lane":1},{"time":15.424,"lane":2},{"time":15.445,"lane":3},{"time":15.744,"lane":0},{"time":15.915,"lane":1},{"time":16.235,"lane":2},{"time":16.384,"lane":3},{"time":16.533,"lane":0},{"time":16.555,"lane":1},{"time":16.704,"lane":2},{"time":17.003,"lane":3},{"time":17.173,"lane":0},{"time":17.493,"lane":1},{"time":17.643,"lane":2},{"time":17.792,"lane":3},{"time":17.963,"lane":0},{"time":18.261,"lane":1},{"time":18.432,"lane":2},{"time":18.752,"lane":3},{"time":18.901,"lane":0},{"time":19.072,"lane":1},{"time":19.221,"lane":2},{"time":19.541,"lane":3},{"time":19.691,"lane":0},{"time":20.011,"lane":1},{"time":20.16,"lane":2},{"time":21.077,"lane":3},{"time":21.099,"lane":0},{"time":21.568,"lane":1},{"time":21.589,"lane":2},{"time":22.208,"lane":3},{"time":23.616,"lane":0},{"time":24.107,"lane":1},{"time":24.277,"lane":2},{"time":24.427,"lane":3},{"time":24.512,"lane":0},{"time":24.597,"lane":1},{"time":24.661,"lane":2},{"time":24.747,"lane":3},{"time":24.832,"lane":0},{"time":24.896,"lane":1},{"time":24.981,"lane":2},{"time":25.067,"lane":3},{"time":25.131,"lane":0},{"time":25.216,"lane":1},{"time":25.301,"lane":2},{"time":25.387,"lane":3},{"time":25.451,"lane":0},{"time":25.536,"lane":1},{"time":25.707,"lane":2},{"time":25.856,"lane":3},{"time":26.112,"lane":0},{"time":26.645,"lane":1},{"time":26.965,"lane":2},{"time":27.115,"lane":3},{"time":27.584,"lane":0},{"time":27.733,"lane":1},{"time":27.755,"lane":2},{"time":27.904,"lane":3},{"time":27.925,"lane":0},{"time":28.075,"lane":1},{"time":28.843,"lane":2},{"time":28.992,"lane":3},{"time":29.013,"lane":0},{"time":29.632,"lane":1},{"time":29.973,"lane":2},{"time":30.123,"lane":3},{"time":30.272,"lane":0},{"time":30.592,"lane":1},{"time":30.763,"lane":2},{"time":30.912,"lane":3},{"time":31.36,"lane":0},{"time":31.381,"lane":1},{"time":31.509,"lane":2},{"time":31.531,"lane":3},{"time":31.659,"lane":0},{"time":31.701,"lane":1},{"time":32,"lane":2},{"time":32.171,"lane":3},{"time":32.576,"lane":0},{"time":32.789,"lane":1},{"time":32.96,"lane":2},{"time":33.109,"lane":3},{"time":33.28,"lane":0},{"time":33.899,"lane":1},{"time":33.92,"lane":2},{"time":34.048,"lane":3},{"time":34.069,"lane":0},{"time":34.219,"lane":1},{"time":34.539,"lane":2},{"time":34.709,"lane":3},{"time":34.837,"lane":0},{"time":34.859,"lane":1},{"time":35.008,"lane":2},{"time":35.179,"lane":3},{"time":35.328,"lane":0},{"time":35.477,"lane":1},{"time":35.563,"lane":2},{"time":35.648,"lane":3},{"time":36.267,"lane":0},{"time":36.288,"lane":1},{"time":36.437,"lane":2},{"time":36.587,"lane":3},{"time":36.907,"lane":0},{"time":37.227,"lane":1},{"time":37.547,"lane":2},{"time":37.696,"lane":3},{"time":37.845,"lane":0},{"time":38.165,"lane":1},{"time":38.485,"lane":2},{"time":38.805,"lane":3},{"time":39.125,"lane":0},{"time":39.445,"lane":1},{"time":39.744,"lane":2},{"time":40.235,"lane":3},{"time":40.384,"lane":0},{"time":40.704,"lane":1},{"time":41.003,"lane":2},{"time":41.323,"lane":3},{"time":41.344,"lane":0},{"time":41.493,"lane":1},{"time":41.643,"lane":2},{"time":41.963,"lane":3},{"time":42.283,"lane":0},{"time":42.603,"lane":1},{"time":42.752,"lane":2},{"time":42.901,"lane":3},{"time":43.221,"lane":0},{"time":43.541,"lane":1},{"time":43.861,"lane":2},{"time":44.16,"lane":3},{"time":44.501,"lane":0},{"time":44.8,"lane":1},{"time":45.12,"lane":2},{"time":45.291,"lane":3},{"time":45.44,"lane":0},{"time":45.589,"lane":1},{"time":45.76,"lane":2},{"time":46.059,"lane":3},{"time":46.187,"lane":0},{"time":46.229,"lane":1},{"time":46.549,"lane":2},{"time":46.699,"lane":3},{"time":46.827,"lane":0},{"time":47.019,"lane":1},{"time":47.317,"lane":2},{"time":47.488,"lane":3},{"time":47.808,"lane":0},{"time":47.957,"lane":1},{"time":48.107,"lane":2},{"time":48.128,"lane":3},{"time":48.277,"lane":0},{"time":48.576,"lane":1},{"time":48.747,"lane":2},{"time":49.067,"lane":3},{"time":49.216,"lane":0},{"time":49.536,"lane":1},{"time":49.856,"lane":2},{"time":50.005,"lane":3},{"time":50.027,"lane":0},{"time":50.325,"lane":1},{"time":50.475,"lane":2},{"time":50.645,"lane":3},{"time":51.115,"lane":0},{"time":51.221,"lane":1},{"time":51.285,"lane":2},{"time":51.584,"lane":3},{"time":51.605,"lane":0},{"time":51.755,"lane":1},{"time":51.904,"lane":2},{"time":52.075,"lane":3},{"time":52.373,"lane":0},{"time":52.523,"lane":1},{"time":52.544,"lane":2},{"time":52.843,"lane":3},{"time":52.864,"lane":0},{"time":53.013,"lane":1},{"time":53.333,"lane":2},{"time":53.632,"lane":3},{"time":53.803,"lane":0},{"time":54.123,"lane":1},{"time":54.272,"lane":2},{"time":54.443,"lane":3},{"time":54.592,"lane":0},{"time":55.061,"lane":1},{"time":55.381,"lane":2},{"time":55.531,"lane":3},{"time":55.68,"lane":0},{"time":55.701,"lane":1},{"time":55.872,"lane":2},{"time":56.171,"lane":3},{"time":56.32,"lane":0},{"time":56.341,"lane":1},{"time":56.64,"lane":2},{"time":56.789,"lane":3},{"time":57.109,"lane":0},{"time":57.429,"lane":1},{"time":57.6,"lane":2},{"time":57.899,"lane":3},{"time":57.92,"lane":0},{"time":58.048,"lane":1},{"time":58.069,"lane":2},{"time":58.219,"lane":3},{"time":58.389,"lane":0},{"time":58.688,"lane":1},{"time":58.859,"lane":2},{"time":59.179,"lane":3},{"time":59.328,"lane":0},{"time":60.117,"lane":1},{"time":60.267,"lane":2},{"time":60.587,"lane":3},{"time":60.736,"lane":0},{"time":60.757,"lane":1},{"time":60.907,"lane":2},{"time":61.077,"lane":3},{"time":61.227,"lane":0},{"time":61.483,"lane":1},{"time":61.845,"lane":2},{"time":62.016,"lane":3},{"time":62.336,"lane":0},{"time":62.485,"lane":1},{"time":62.955,"lane":2},{"time":63.104,"lane":3},{"time":63.125,"lane":0},{"time":63.275,"lane":1},{"time":63.445,"lane":2},{"time":63.744,"lane":3},{"time":64,"lane":0},{"time":64.213,"lane":1},{"time":64.363,"lane":2},{"time":64.384,"lane":3},{"time":64.555,"lane":0},{"time":64.704,"lane":1},{"time":65.643,"lane":2},{"time":65.963,"lane":3},{"time":66.133,"lane":0},{"time":66.261,"lane":1},{"time":66.731,"lane":2},{"time":66.88,"lane":3},{"time":66.901,"lane":0},{"time":67.029,"lane":1},{"time":67.072,"lane":2},{"time":67.221,"lane":3},{"time":67.541,"lane":0},{"time":68.032,"lane":1},{"time":68.16,"lane":2},{"time":68.331,"lane":3},{"time":68.501,"lane":0},{"time":68.651,"lane":1},{"time":68.8,"lane":2},{"time":69.248,"lane":3},{"time":69.269,"lane":0},{"time":69.291,"lane":1},{"time":69.419,"lane":2},{"time":69.589,"lane":3},{"time":69.739,"lane":0},{"time":69.909,"lane":1},{"time":70.08,"lane":2},{"time":70.208,"lane":3},{"time":70.229,"lane":0},{"time":70.379,"lane":1},{"time":70.528,"lane":2},{"time":70.549,"lane":3},{"time":70.699,"lane":0},{"time":70.848,"lane":1},{"time":70.933,"lane":2},{"time":71.019,"lane":3},{"time":71.488,"lane":0},{"time":71.957,"lane":1},{"time":72.085,"lane":2},{"time":72.107,"lane":3},{"time":72.704,"lane":0},{"time":72.725,"lane":1},{"time":72.747,"lane":2},{"time":73.387,"lane":3},{"time":73.536,"lane":0},{"time":74.027,"lane":1},{"time":74.624,"lane":2},{"time":74.645,"lane":3},{"time":75.243,"lane":0},{"time":75.264,"lane":1},{"time":76.544,"lane":2},{"time":77.013,"lane":3},{"time":77.141,"lane":0},{"time":77.163,"lane":1},{"time":77.184,"lane":2},{"time":77.632,"lane":3},{"time":77.76,"lane":0},{"time":77.781,"lane":1},{"time":77.803,"lane":2},{"time":78.443,"lane":3},{"time":79.083,"lane":0},{"time":79.68,"lane":1},{"time":79.701,"lane":2},{"time":80.469,"lane":3},{"time":80.64,"lane":0},{"time":80.789,"lane":1},{"time":80.811,"lane":2},{"time":80.96,"lane":3},{"time":81.045,"lane":0},{"time":81.429,"lane":1},{"time":81.728,"lane":2},{"time":82.048,"lane":3},{"time":82.069,"lane":0},{"time":82.219,"lane":1},{"time":82.688,"lane":2},{"time":83.307,"lane":3},{"time":83.328,"lane":0},{"time":83.627,"lane":1},{"time":83.648,"lane":2},{"time":84.245,"lane":3},{"time":84.267,"lane":0},{"time":84.587,"lane":1},{"time":84.757,"lane":2},{"time":85.077,"lane":3},{"time":85.227,"lane":0},{"time":85.547,"lane":1},{"time":85.845,"lane":2},{"time":86.165,"lane":3},{"time":86.485,"lane":0},{"time":86.784,"lane":1},{"time":87.104,"lane":2},{"time":87.253,"lane":3},{"time":87.275,"lane":0},{"time":87.744,"lane":1},{"time":88.363,"lane":2},{"time":88.384,"lane":3},{"time":88.683,"lane":0},{"time":88.704,"lane":1},{"time":89.003,"lane":2},{"time":89.301,"lane":3},{"time":89.323,"lane":0},{"time":89.643,"lane":1},{"time":89.792,"lane":2},{"time":89.813,"lane":3},{"time":90.112,"lane":0},{"time":90.133,"lane":1},{"time":90.283,"lane":2},{"time":90.411,"lane":3},{"time":90.432,"lane":0},{"time":90.581,"lane":1},{"time":91.072,"lane":2},{"time":91.371,"lane":3},{"time":91.392,"lane":0},{"time":91.52,"lane":1},{"time":91.541,"lane":2},{"time":91.691,"lane":3},{"time":91.989,"lane":0},{"time":92.011,"lane":1},{"time":92.16,"lane":2},{"time":92.309,"lane":3},{"time":92.331,"lane":0},{"time":92.629,"lane":1},{"time":92.8,"lane":2},{"time":92.949,"lane":3},{"time":93.248,"lane":0},{"time":93.269,"lane":1},{"time":93.419,"lane":2},{"time":93.589,"lane":3},{"time":93.739,"lane":0},{"time":93.76,"lane":1},{"time":94.549,"lane":2},{"time":94.848,"lane":3},{"time":94.891,"lane":0},{"time":95.488,"lane":1},{"time":95.509,"lane":2},{"time":96.107,"lane":3},{"time":96.277,"lane":0},{"time":96.896,"lane":1},{"time":97.045,"lane":2},{"time":97.067,"lane":3},{"time":97.088,"lane":0},{"time":97.365,"lane":1},{"time":97.387,"lane":2},{"time":98.005,"lane":3},{"time":98.027,"lane":0},{"time":98.304,"lane":1},{"time":98.325,"lane":2},{"time":99.605,"lane":3},{"time":99.883,"lane":0},{"time":99.904,"lane":1},{"time":100.544,"lane":2},{"time":101.163,"lane":3},{"time":101.333,"lane":0},{"time":101.952,"lane":1},{"time":102.101,"lane":2},{"time":102.251,"lane":3},{"time":102.272,"lane":0},{"time":102.421,"lane":1},{"time":102.443,"lane":2},{"time":102.72,"lane":3},{"time":102.741,"lane":0},{"time":103.019,"lane":1},{"time":103.061,"lane":2},{"time":103.296,"lane":3},{"time":103.381,"lane":0},{"time":104.171,"lane":1},{"time":104.469,"lane":2},{"time":104.597,"lane":3},{"time":104.789,"lane":0},{"time":104.811,"lane":1},{"time":104.939,"lane":2},{"time":104.96,"lane":3},{"time":105.28,"lane":0},{"time":105.429,"lane":1},{"time":106.048,"lane":2},{"time":106.069,"lane":3},{"time":106.219,"lane":0},{"time":106.389,"lane":1},{"time":106.688,"lane":2},{"time":107.157,"lane":3},{"time":107.307,"lane":0},{"time":107.328,"lane":1},{"time":107.499,"lane":2},{"time":107.797,"lane":3},{"time":107.947,"lane":0},{"time":108.288,"lane":1},{"time":108.437,"lane":2},{"time":108.587,"lane":3},{"time":108.907,"lane":0},{"time":109.227,"lane":1},{"time":109.525,"lane":2},{"time":109.653,"lane":3},{"time":109.675,"lane":0},{"time":109.824,"lane":1},{"time":109.845,"lane":2},{"time":109.973,"lane":3},{"time":110.016,"lane":0},{"time":110.336,"lane":1},{"time":110.485,"lane":2},{"time":110.955,"lane":3},{"time":111.104,"lane":0},{"time":111.125,"lane":1},{"time":111.275,"lane":2},{"time":111.445,"lane":3},{"time":111.744,"lane":0},{"time":112.213,"lane":1},{"time":112.235,"lane":2},{"time":112.384,"lane":3},{"time":112.533,"lane":0},{"time":112.555,"lane":1},{"time":112.704,"lane":2},{"time":112.853,"lane":3},{"time":113.024,"lane":0},{"time":113.173,"lane":1},{"time":113.493,"lane":2},{"time":113.643,"lane":3},{"time":113.792,"lane":0},{"time":113.877,"lane":1},{"time":114.432,"lane":2},{"time":114.901,"lane":3},{"time":115.029,"lane":0},{"time":115.051,"lane":1},{"time":115.072,"lane":2},{"time":115.52,"lane":3},{"time":115.669,"lane":0},{"time":115.691,"lane":1},{"time":115.712,"lane":2},{"time":116.331,"lane":3},{"time":116.971,"lane":0},{"time":117.568,"lane":1},{"time":117.589,"lane":2},{"time":117.888,"lane":3},{"time":117.909,"lane":0},{"time":118.208,"lane":1},{"time":118.229,"lane":2},{"time":121.152,"lane":3},{"time":121.173,"lane":0},{"time":122.176,"lane":1},{"time":122.197,"lane":2},{"time":122.965,"lane":3},{"time":123.456,"lane":0},{"time":123.477,"lane":1},{"time":124.693,"lane":2},{"time":124.843,"lane":3},{"time":124.864,"lane":0},{"time":125.269,"lane":1},{"time":125.717,"lane":2},{"time":126.016,"lane":3},{"time":126.144,"lane":0},{"time":126.165,"lane":1},{"time":126.464,"lane":2},{"time":126.613,"lane":3},{"time":126.912,"lane":0},{"time":127.061,"lane":1},{"time":127.339,"lane":2},{"time":127.36,"lane":3},{"time":127.509,"lane":0},{"time":128.256,"lane":1},{"time":128.405,"lane":2},{"time":128.683,"lane":3},{"time":128.704,"lane":0},{"time":128.853,"lane":1},{"time":129.6,"lane":2},{"time":129.707,"lane":3},{"time":129.728,"lane":0},{"time":130.027,"lane":1},{"time":130.197,"lane":2},{"time":130.475,"lane":3},{"time":130.496,"lane":0},{"time":130.645,"lane":1},{"time":130.923,"lane":2},{"time":131.072,"lane":3},{"time":131.093,"lane":0},{"time":131.669,"lane":1},{"time":131.84,"lane":2},{"time":133.184,"lane":3},{"time":133.312,"lane":0},{"time":133.611,"lane":1},{"time":133.781,"lane":2},{"time":134.059,"lane":3},{"time":134.229,"lane":0},{"time":134.507,"lane":1},{"time":134.656,"lane":2},{"time":134.677,"lane":3},{"time":134.827,"lane":0},{"time":135.403,"lane":1},{"time":135.424,"lane":2},{"time":135.552,"lane":3},{"time":135.573,"lane":0},{"time":135.851,"lane":1},{"time":136,"lane":2},{"time":136.021,"lane":3},{"time":136.747,"lane":0},{"time":136.896,"lane":1},{"time":137.195,"lane":2},{"time":137.344,"lane":3},{"time":137.365,"lane":0},{"time":137.643,"lane":1},{"time":137.664,"lane":2},{"time":137.813,"lane":3},{"time":138.091,"lane":0},{"time":138.24,"lane":1},{"time":138.261,"lane":2},{"time":138.837,"lane":3},{"time":138.88,"lane":0},{"time":140.48,"lane":1},{"time":140.501,"lane":2},{"time":140.693,"lane":3},{"time":140.928,"lane":0},{"time":140.949,"lane":1},{"time":141.184,"lane":2},{"time":141.376,"lane":3},{"time":141.397,"lane":0},{"time":141.803,"lane":1},{"time":141.824,"lane":2},{"time":142.272,"lane":3},{"time":142.464,"lane":0},{"time":142.507,"lane":1},{"time":142.72,"lane":2},{"time":142.869,"lane":3},{"time":142.955,"lane":0},{"time":142.976,"lane":1},{"time":143.168,"lane":2},{"time":143.189,"lane":3},{"time":144.277,"lane":0},{"time":145.024,"lane":1},{"time":145.387,"lane":2},{"time":145.408,"lane":3},{"time":145.771,"lane":0},{"time":146.155,"lane":1},{"time":146.517,"lane":2},{"time":146.539,"lane":3},{"time":146.901,"lane":0},{"time":147.285,"lane":1},{"time":147.648,"lane":2}]
            },
            {
                id: "spawn-doors-detpack-blues",
                title: "Spawn Doors Detback Blues",
                artist: "?",
                url: "https://raw.githubusercontent.com/CoryBouchard/html5-rhythm-game/main/SpawnDoorsDetpackBlues.mp3",
                bpm: 150, // You might need to adjust this
                beatmap: [{"time":0,"lane":0},{"time":0.064,"lane":1},{"time":0.085,"lane":2},{"time":0.107,"lane":3},{"time":0.128,"lane":0},{"time":0.299,"lane":1},{"time":1.109,"lane":2},{"time":1.259,"lane":3},{"time":1.856,"lane":0},{"time":2.731,"lane":1},{"time":4.032,"lane":2},{"time":4.672,"lane":3},{"time":5.333,"lane":0},{"time":5.973,"lane":1},{"time":6.613,"lane":2},{"time":7.104,"lane":3},{"time":7.595,"lane":0},{"time":7.765,"lane":1},{"time":8.235,"lane":2},{"time":8.256,"lane":3},{"time":9.216,"lane":0},{"time":9.536,"lane":1},{"time":9.707,"lane":2},{"time":10.517,"lane":3},{"time":11.797,"lane":0},{"time":11.819,"lane":1},{"time":11.968,"lane":2},{"time":12.459,"lane":3},{"time":12.779,"lane":0},{"time":12.864,"lane":1},{"time":12.949,"lane":2},{"time":13.099,"lane":3},{"time":13.269,"lane":0},{"time":13.589,"lane":1},{"time":14.08,"lane":2},{"time":14.571,"lane":3},{"time":14.891,"lane":0},{"time":15.061,"lane":1},{"time":15.211,"lane":2},{"time":15.851,"lane":3},{"time":16.192,"lane":0},{"time":16.512,"lane":1},{"time":16.683,"lane":2},{"time":16.832,"lane":3},{"time":17.003,"lane":0},{"time":17.152,"lane":1},{"time":17.323,"lane":2},{"time":18.069,"lane":3},{"time":18.304,"lane":0},{"time":18.453,"lane":1},{"time":18.752,"lane":2},{"time":19.264,"lane":3},{"time":19.349,"lane":0},{"time":19.755,"lane":1},{"time":20.245,"lane":2},{"time":20.395,"lane":3},{"time":20.565,"lane":0},{"time":20.715,"lane":1},{"time":20.885,"lane":2},{"time":21.355,"lane":3},{"time":21.845,"lane":0},{"time":21.867,"lane":1},{"time":22.165,"lane":2},{"time":22.187,"lane":3},{"time":22.677,"lane":0},{"time":22.848,"lane":1},{"time":22.997,"lane":2},{"time":23.253,"lane":3},{"time":23.488,"lane":0},{"time":24.299,"lane":1},{"time":24.533,"lane":2},{"time":24.597,"lane":3},{"time":24.939,"lane":0},{"time":25.109,"lane":1},{"time":25.259,"lane":2},{"time":25.877,"lane":3},{"time":25.92,"lane":0},{"time":26.24,"lane":1},{"time":26.88,"lane":2},{"time":27.051,"lane":3},{"time":27.136,"lane":0},{"time":27.2,"lane":1},{"time":27.541,"lane":2},{"time":27.797,"lane":3},{"time":27.84,"lane":0},{"time":28.181,"lane":1},{"time":28.352,"lane":2},{"time":28.501,"lane":3},{"time":28.843,"lane":0},{"time":29.163,"lane":1},{"time":29.483,"lane":2},{"time":30.293,"lane":3},{"time":31.189,"lane":0},{"time":31.275,"lane":1},{"time":31.659,"lane":2},{"time":31.744,"lane":3},{"time":31.957,"lane":0},{"time":32.235,"lane":1},{"time":32.555,"lane":2},{"time":32.576,"lane":3},{"time":32.896,"lane":0},{"time":33.216,"lane":1},{"time":33.536,"lane":2},{"time":33.707,"lane":3},{"time":34.027,"lane":0},{"time":34.197,"lane":1},{"time":34.837,"lane":2},{"time":36.139,"lane":3},{"time":36.309,"lane":0},{"time":36.459,"lane":1},{"time":36.864,"lane":2},{"time":36.949,"lane":3},{"time":37.589,"lane":0},{"time":37.909,"lane":1},{"time":38.699,"lane":2},{"time":38.827,"lane":3},{"time":39.211,"lane":0},{"time":39.787,"lane":1},{"time":40.021,"lane":2},{"time":40.085,"lane":3},{"time":40.149,"lane":0},{"time":40.683,"lane":1},{"time":40.832,"lane":2},{"time":41.003,"lane":3},{"time":41.152,"lane":0},{"time":41.643,"lane":1},{"time":41.813,"lane":2},{"time":42.133,"lane":3},{"time":42.453,"lane":0},{"time":42.624,"lane":1},{"time":42.944,"lane":2},{"time":43.371,"lane":3},{"time":43.605,"lane":0},{"time":44.075,"lane":1},{"time":44.203,"lane":2},{"time":44.245,"lane":3},{"time":44.395,"lane":0},{"time":44.715,"lane":1},{"time":45.056,"lane":2},{"time":45.867,"lane":3},{"time":46.123,"lane":0},{"time":46.165,"lane":1},{"time":46.784,"lane":2},{"time":46.805,"lane":3},{"time":46.827,"lane":0},{"time":47.253,"lane":1},{"time":47.509,"lane":2},{"time":47.808,"lane":3},{"time":48.107,"lane":0},{"time":48.128,"lane":1},{"time":48.789,"lane":2},{"time":49.109,"lane":3},{"time":49.259,"lane":0},{"time":50.667,"lane":1},{"time":51.051,"lane":2},{"time":51.541,"lane":3},{"time":51.691,"lane":0},{"time":52.203,"lane":1},{"time":52.352,"lane":2},{"time":53.163,"lane":3},{"time":54.293,"lane":0},{"time":54.784,"lane":1},{"time":55.595,"lane":2},{"time":55.765,"lane":3},{"time":55.915,"lane":0},{"time":57.216,"lane":1},{"time":57.685,"lane":2},{"time":57.707,"lane":3},{"time":57.899,"lane":0},{"time":58.176,"lane":1},{"time":58.496,"lane":2},{"time":58.517,"lane":3},{"time":58.837,"lane":0},{"time":59.477,"lane":1},{"time":60.779,"lane":2},{"time":61.269,"lane":3},{"time":61.44,"lane":0},{"time":61.611,"lane":1},{"time":62.08,"lane":2},{"time":63.296,"lane":3},{"time":63.381,"lane":0},{"time":63.531,"lane":1},{"time":64.021,"lane":2},{"time":64.512,"lane":3},{"time":64.661,"lane":0},{"time":64.683,"lane":1},{"time":64.853,"lane":2},{"time":66.197,"lane":3},{"time":66.453,"lane":0},{"time":66.624,"lane":1},{"time":67.264,"lane":2},{"time":67.349,"lane":3},{"time":67.584,"lane":0},{"time":68.565,"lane":1},{"time":68.885,"lane":2},{"time":68.907,"lane":3},{"time":69.056,"lane":0},{"time":69.205,"lane":1},{"time":69.376,"lane":2},{"time":69.547,"lane":3},{"time":69.696,"lane":0},{"time":69.952,"lane":1},{"time":70.016,"lane":2},{"time":70.165,"lane":3},{"time":70.592,"lane":0},{"time":71.168,"lane":1},{"time":71.317,"lane":2},{"time":71.488,"lane":3},{"time":71.637,"lane":0},{"time":72.128,"lane":1},{"time":72.299,"lane":2},{"time":72.939,"lane":3},{"time":73.109,"lane":0},{"time":73.579,"lane":1},{"time":73.771,"lane":2},{"time":73.856,"lane":3},{"time":74.048,"lane":0},{"time":74.24,"lane":1},{"time":74.56,"lane":2},{"time":75.051,"lane":3},{"time":75.136,"lane":0},{"time":76.181,"lane":1},{"time":76.48,"lane":2},{"time":76.672,"lane":3},{"time":76.843,"lane":0},{"time":76.992,"lane":1},{"time":77.248,"lane":2},{"time":77.568,"lane":3},{"time":77.653,"lane":0},{"time":77.973,"lane":1},{"time":78.443,"lane":2},{"time":78.933,"lane":3},{"time":79.253,"lane":0},{"time":79.275,"lane":1},{"time":79.595,"lane":2},{"time":80.235,"lane":3},{"time":80.576,"lane":0},{"time":80.853,"lane":1},{"time":81.365,"lane":2},{"time":82.027,"lane":3},{"time":82.347,"lane":0},{"time":82.688,"lane":1},{"time":82.837,"lane":2},{"time":82.987,"lane":3},{"time":83.477,"lane":0},{"time":83.989,"lane":1},{"time":84.139,"lane":2},{"time":84.459,"lane":3},{"time":85.099,"lane":0},{"time":85.419,"lane":1},{"time":86.08,"lane":2},{"time":86.4,"lane":3},{"time":86.656,"lane":0},{"time":86.72,"lane":1},{"time":86.955,"lane":2},{"time":87.595,"lane":3},{"time":88,"lane":0},{"time":88.021,"lane":1},{"time":88.619,"lane":2},{"time":88.789,"lane":3},{"time":88.811,"lane":0},{"time":88.832,"lane":1},{"time":89.323,"lane":2},{"time":89.621,"lane":3},{"time":89.643,"lane":0},{"time":90.624,"lane":1},{"time":90.773,"lane":2},{"time":91.264,"lane":3},{"time":91.52,"lane":0},{"time":92.565,"lane":1},{"time":93.205,"lane":2},{"time":93.867,"lane":3},{"time":94.677,"lane":0},{"time":95.488,"lane":1},{"time":95.808,"lane":2},{"time":97.109,"lane":3},{"time":97.344,"lane":0},{"time":97.429,"lane":1},{"time":98.389,"lane":2},{"time":99.541,"lane":3},{"time":99.691,"lane":0},{"time":99.712,"lane":1},{"time":100.011,"lane":2},{"time":100.032,"lane":3},{"time":100.352,"lane":0},{"time":100.843,"lane":1},{"time":100.992,"lane":2},{"time":101.163,"lane":3},{"time":101.653,"lane":0},{"time":101.973,"lane":1},{"time":102.293,"lane":2},{"time":102.933,"lane":3},{"time":103.275,"lane":0},{"time":103.424,"lane":1},{"time":103.595,"lane":2},{"time":104.725,"lane":3},{"time":105.131,"lane":0},{"time":105.536,"lane":1},{"time":105.707,"lane":2},{"time":106.027,"lane":3},{"time":106.688,"lane":0},{"time":106.837,"lane":1},{"time":107.008,"lane":2},{"time":107.477,"lane":3},{"time":107.968,"lane":0},{"time":108.139,"lane":1},{"time":108.459,"lane":2},{"time":109.099,"lane":3},{"time":110.08,"lane":0},{"time":110.4,"lane":1},{"time":110.891,"lane":2},{"time":111.381,"lane":3},{"time":111.701,"lane":0},{"time":112.341,"lane":1},{"time":113.643,"lane":2},{"time":114.283,"lane":3},{"time":114.944,"lane":0},{"time":115.115,"lane":1},{"time":115.264,"lane":2},{"time":115.925,"lane":3},{"time":116.245,"lane":0},{"time":116.565,"lane":1},{"time":116.885,"lane":2},{"time":117.205,"lane":3},{"time":117.461,"lane":0},{"time":117.525,"lane":1},{"time":117.547,"lane":2},{"time":117.781,"lane":3},{"time":117.867,"lane":0},{"time":118.187,"lane":1},{"time":118.997,"lane":2},{"time":119.488,"lane":3},{"time":120.128,"lane":0},{"time":120.448,"lane":1},{"time":120.533,"lane":2},{"time":120.619,"lane":3},{"time":120.768,"lane":0},{"time":120.789,"lane":1},{"time":121.259,"lane":2},{"time":121.429,"lane":3},{"time":121.664,"lane":0},{"time":121.749,"lane":1},{"time":121.92,"lane":2},{"time":122.091,"lane":3},{"time":122.24,"lane":0},{"time":122.56,"lane":1},{"time":122.731,"lane":2},{"time":122.88,"lane":3},{"time":123.2,"lane":0},{"time":123.371,"lane":1},{"time":123.541,"lane":2},{"time":124.032,"lane":3},{"time":124.352,"lane":0},{"time":124.501,"lane":1},{"time":124.672,"lane":2},{"time":124.843,"lane":3},{"time":125.163,"lane":0},{"time":125.312,"lane":1},{"time":125.973,"lane":2},{"time":126.635,"lane":3},{"time":126.955,"lane":0},{"time":127.104,"lane":1},{"time":127.275,"lane":2},{"time":127.424,"lane":3},{"time":127.915,"lane":0},{"time":128.235,"lane":1},{"time":128.256,"lane":2},{"time":128.725,"lane":3},{"time":128.896,"lane":0},{"time":129.045,"lane":1},{"time":129.536,"lane":2},{"time":130.197,"lane":3},{"time":130.475,"lane":0},{"time":130.517,"lane":1},{"time":130.837,"lane":2},{"time":130.859,"lane":3},{"time":130.965,"lane":0},{"time":131.157,"lane":1},{"time":131.627,"lane":2},{"time":132.117,"lane":3},{"time":132.139,"lane":0},{"time":132.437,"lane":1},{"time":132.459,"lane":2},{"time":132.779,"lane":3},{"time":133.44,"lane":0},{"time":133.76,"lane":1},{"time":133.909,"lane":2},{"time":135.296,"lane":3},{"time":135.552,"lane":0},{"time":135.872,"lane":1},{"time":136.021,"lane":2},{"time":136.192,"lane":3},{"time":136.512,"lane":0},{"time":136.683,"lane":1},{"time":137.003,"lane":2},{"time":137.088,"lane":3},{"time":137.323,"lane":0},{"time":137.963,"lane":1},{"time":138.624,"lane":2},{"time":138.795,"lane":3},{"time":139.264,"lane":0},{"time":140.224,"lane":1},{"time":140.779,"lane":2},{"time":141.184,"lane":3},{"time":141.205,"lane":0},{"time":141.973,"lane":1},{"time":141.995,"lane":2},{"time":142.016,"lane":3},{"time":142.507,"lane":0},{"time":142.827,"lane":1},{"time":142.848,"lane":2},{"time":142.997,"lane":3},{"time":143.061,"lane":0},{"time":143.168,"lane":1},{"time":143.488,"lane":2},{"time":143.957,"lane":3},{"time":144.619,"lane":0},{"time":145.109,"lane":1},{"time":145.152,"lane":2},{"time":145.6,"lane":3},{"time":145.92,"lane":0},{"time":146.24,"lane":1},{"time":146.411,"lane":2},{"time":146.56,"lane":3},{"time":147.221,"lane":0},{"time":147.541,"lane":1},{"time":147.691,"lane":2},{"time":147.861,"lane":3},{"time":148.032,"lane":0},{"time":148.352,"lane":1},{"time":148.501,"lane":2},{"time":148.629,"lane":3},{"time":148.651,"lane":0},{"time":148.779,"lane":1},{"time":148.928,"lane":2},{"time":149.141,"lane":3},{"time":149.163,"lane":0},{"time":149.227,"lane":1},{"time":149.248,"lane":2},{"time":149.312,"lane":3},{"time":149.781,"lane":0},{"time":150.485,"lane":1},{"time":150.507,"lane":2},{"time":150.613,"lane":3},{"time":150.933,"lane":0},{"time":151.104,"lane":1},{"time":151.275,"lane":2},{"time":151.467,"lane":3},{"time":151.573,"lane":0},{"time":151.723,"lane":1},{"time":151.744,"lane":2},{"time":151.872,"lane":3},{"time":151.915,"lane":0},{"time":152.213,"lane":1},{"time":152.384,"lane":2},{"time":152.405,"lane":3},{"time":152.64,"lane":0},{"time":153.195,"lane":1},{"time":153.216,"lane":2},{"time":163.648,"lane":3},{"time":165.035,"lane":0},{"time":165.888,"lane":1},{"time":166.101,"lane":2},{"time":166.315,"lane":3},{"time":166.528,"lane":0},{"time":167.595,"lane":1},{"time":168.448,"lane":2},{"time":169.301,"lane":3},{"time":169.515,"lane":0},{"time":169.728,"lane":1},{"time":169.792,"lane":2},{"time":171.008,"lane":3},{"time":171.883,"lane":0},{"time":172.736,"lane":1}]
            }
        ];

        // --- Initialization ---
        function init() {
            setupCanvas();
            populateSongSelect();
            addEventListeners();
        }

        function setupCanvas() {
            const container = document.getElementById('game-container');
            const dpr = window.devicePixelRatio || 1;
            const rect = container.getBoundingClientRect();
            canvas.width = rect.width * dpr;
            canvas.height = (window.innerHeight * 0.7) * dpr;
            canvas.style.width = `${rect.width}px`;
            canvas.style.height = `${window.innerHeight * 0.7}px`;
            ctx.scale(dpr, dpr);
        }

        function populateSongSelect() {
            songs.forEach((song, index) => {
                const option = document.createElement('option');
                option.value = index;
                option.textContent = `${song.title} - ${song.artist}`;
                songSelect.appendChild(option);
            });
        }

        function addEventListeners() {
            startButton.addEventListener('click', startGame);
            restartButton.addEventListener('click', resetGame);
            window.addEventListener('keydown', handleKeyPress);
            window.addEventListener('keyup', handleKeyRelease);
            window.addEventListener('resize', setupCanvas);
            submitScoreButton.addEventListener('click', saveScore);

            // Touch/Mouse controls
            Object.values(keyElements).forEach((el, index) => {
                el.addEventListener('mousedown', () => handleTouchPress(index));
                el.addEventListener('touchstart', (e) => {
                    e.preventDefault();
                    handleTouchPress(index);
                });
            });
        }

        // --- Game Flow ---
        function startGame() {
            const selectedSongIndex = songSelect.value;
            currentSong = songs[selectedSongIndex];

            score = 0;
            combo = 0;
            maxCombo = 0;
            updateUI();

            upcomingTiles = [...currentSong.beatmap].sort((a, b) => a.time - b.time);
            tiles = [];

            gameAudio.src = currentSong.url;
            gameAudio.load();
            
            startScreen.classList.add('hidden');
            endScreen.classList.add('hidden');
            gameScreen.classList.remove('hidden');

            gameAudio.oncanplaythrough = () => {
                if(gameAudio.oncanplaythrough) { 
                    gameAudio.oncanplaythrough = null;
                    gameAudio.play();
                    audioStartTime = performance.now();
                    isPlaying = true;
                    gameLoop();
                }
            };
            
            gameAudio.onended = () => {
                setTimeout(endGame, 1000);
            };
        }
        
        async function endGame() {
            isPlaying = false;
            cancelAnimationFrame(animationFrameId);
            gameScreen.classList.add('hidden');
            finalScoreDisplay.textContent = score;
            maxComboDisplay.textContent = maxCombo;
            endScreen.classList.remove('hidden');
            
            await checkLeaderboard();
        }

        function resetGame() {
            endScreen.classList.add('hidden');
            startScreen.classList.remove('hidden');
            gameAudio.oncanplaythrough = null;
        }

        // --- Leaderboard Functions ---
        async function checkLeaderboard() {
            leaderboardList.innerHTML = '<li>Loading...</li>';
            newHighScoreContainer.classList.add('hidden');
            
            const songId = currentSong.id;
            const scoresRef = collection(db, `leaderboards/${songId}/scores`);
            const q = query(scoresRef, orderBy("score", "desc"), limit(10));

            try {
                const querySnapshot = await getDocs(q);
                const leaderboardScores = [];
                querySnapshot.forEach((doc) => {
                    leaderboardScores.push(doc.data());
                });

                displayLeaderboard(leaderboardScores);

                // Check if player made the leaderboard
                if (leaderboardScores.length < 10 || score > leaderboardScores[leaderboardScores.length - 1].score) {
                    newHighScoreContainer.classList.remove('hidden');
                }
            } catch (error) {
                console.error("Error fetching leaderboard:", error);
                leaderboardList.innerHTML = '<li>Could not load scores.</li>';
            }
        }

        function displayLeaderboard(scores) {
            leaderboardList.innerHTML = '';
            if (scores.length === 0) {
                leaderboardList.innerHTML = '<li>No high scores yet!</li>';
                return;
            }
            scores.forEach((entry, index) => {
                const li = document.createElement('li');
                li.innerHTML = `<span class="font-bold">${index + 1}. ${entry.initials}</span> - ${entry.score}`;
                leaderboardList.appendChild(li);
            });
        }

        async function saveScore() {
            const initials = initialsInput.value.trim().toUpperCase();
            if (!initials) return;

            submitScoreButton.disabled = true;
            submitScoreButton.textContent = "Submitting...";

            const songId = currentSong.id;
            const scoresRef = collection(db, `leaderboards/${songId}/scores`);
            
            try {
                await addDoc(scoresRef, {
                    initials: initials,
                    score: score,
                    timestamp: serverTimestamp()
                });
                newHighScoreContainer.classList.add('hidden');
                await checkLeaderboard(); // Refresh leaderboard
            } catch (error) {
                console.error("Error saving score:", error);
                alert("Could not save score. Please try again.");
            } finally {
                submitScoreButton.disabled = false;
                submitScoreButton.textContent = "Submit";
            }
        }


        // --- Game Loop ---
        function gameLoop() {
            if (!isPlaying) return;
            const currentTime = gameAudio.currentTime;
            update(currentTime);
            draw();
            animationFrameId = requestAnimationFrame(gameLoop);
        }

        function update(currentTime) {
            while (upcomingTiles.length > 0 && upcomingTiles[0].time < currentTime + (canvas.clientHeight / tileSpeed)) {
                tiles.push(upcomingTiles.shift());
            }
            const targetY = canvas.clientHeight - tileHeight * 1.5;
            tiles = tiles.filter(tile => {
                const timeDifference = tile.time - currentTime;
                if (timeDifference < -hitWindows.miss) {
                    combo = 0;
                    showFeedback('Miss', 'text-red-500');
                    return false;
                }
                return true;
            });
            updateUI();
        }

        function draw() {
            const canvasWidth = canvas.clientWidth;
            const canvasHeight = canvas.clientHeight;
            const laneWidth = canvasWidth / lanes;
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            for (let i = 1; i < lanes; i++) {
                ctx.fillStyle = 'rgba(255, 255, 255, 0.1)';
                ctx.fillRect(i * laneWidth - 1, 0, 2, canvasHeight);
            }
            const targetY = canvasHeight - tileHeight * 1.5;
            ctx.fillStyle = 'rgba(0, 255, 255, 0.5)';
            ctx.fillRect(0, targetY, canvasWidth, tileHeight);
            ctx.strokeStyle = '#00FFFF';
            ctx.lineWidth = 3;
            ctx.strokeRect(0, targetY, canvasWidth, tileHeight);
            const currentTime = gameAudio.currentTime;
            tiles.forEach(tile => {
                const timeDifference = tile.time - currentTime;
                const y = targetY - (timeDifference * tileSpeed);
                ctx.fillStyle = laneColors[tile.lane];
                ctx.fillRect(tile.lane * laneWidth, y, laneWidth, tileHeight);
                ctx.strokeStyle = 'rgba(255, 255, 255, 0.8)';
                ctx.strokeRect(tile.lane * laneWidth, y, laneWidth, tileHeight);
            });
        }

        // --- Input Handling ---
        function handleKeyPress(e) {
            if (!isPlaying || !keyMap.hasOwnProperty(e.key)) return;
            const lane = keyMap[e.key];
            checkHit(lane);
            const keyEl = keyElements[e.key];
            if (keyEl) keyEl.classList.add('pressed');
        }

        function handleKeyRelease(e) {
            if (!keyMap.hasOwnProperty(e.key)) return;
            const keyEl = keyElements[e.key];
            if (keyEl) keyEl.classList.remove('pressed');
        }
        
        function handleTouchPress(lane) {
            if (!isPlaying) return;
            checkHit(lane);
            const key = Object.keys(keyMap).find(k => keyMap[k] === lane);
            const keyEl = keyElements[key];
            if (keyEl) {
                keyEl.classList.add('pressed');
                setTimeout(() => keyEl.classList.remove('pressed'), 100);
            }
        }

        function checkHit(lane) {
            const currentTime = gameAudio.currentTime;
            let hit = false;
            for (let i = 0; i < tiles.length; i++) {
                const tile = tiles[i];
                if (tile.lane === lane) {
                    const timeDifference = Math.abs(tile.time - currentTime);
                    if (timeDifference <= hitWindows.perfect) {
                        score += scores.perfect;
                        combo++;
                        showFeedback('Perfect!', 'text-cyan-400');
                        tiles.splice(i, 1);
                        hit = true;
                        break;
                    } else if (timeDifference <= hitWindows.great) {
                        score += scores.great;
                        combo++;
                        showFeedback('Great!', 'text-green-400');
                        tiles.splice(i, 1);
                        hit = true;
                        break;
                    } else if (timeDifference <= hitWindows.good) {
                        score += scores.good;
                        combo++;
                        showFeedback('Good', 'text-yellow-400');
                        tiles.splice(i, 1);
                        hit = true;
                        break;
                    }
                }
            }
            if (hit) {
                if (combo > maxCombo) {
                    maxCombo = combo;
                }
            }
            updateUI();
        }

        // --- UI Updates ---
        function updateUI() {
            scoreDisplay.textContent = score;
            comboDisplay.textContent = combo;
        }

        function showFeedback(text, colorClass) {
            const feedbackEl = document.createElement('div');
            feedbackEl.textContent = text;
            feedbackEl.className = `feedback absolute text-5xl font-bold ${colorClass} pointer-events-none`;
            while (feedbackContainer.firstChild) {
                feedbackContainer.removeChild(feedbackContainer.firstChild);
            }
            feedbackContainer.appendChild(feedbackEl);
        }

        // --- Run Initialization ---
        init();

    </script>
</body>
</html>
